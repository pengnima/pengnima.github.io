{"version":3,"sources":["webpack:///./src/views/user/User.vue?c5e9","webpack:///src/views/user/User.vue","webpack:///./src/views/user/User.vue?03cd","webpack:///./src/views/user/User.vue","webpack:///./src/views/user/User.vue?61d2"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","$route","meta","on","$event","getUserList","scopedSlots","_u","key","fn","staticStyle","model","value","queryInfo","callback","$$v","$set","expression","proxy","$PowerKey","powerKey","UserPowerKey","UserAdd","handleAddUserClick","_v","_e","userList","val","row","member","style","commonFn","UserType","color","handleUpAgency","_s","name","UserUpdateStatus","status","handleSwitchChange","UserUpdate","handleEditUserClick","id","UserInfo","handleLoadUser","UserDeployRole","handleRoleChange","handleAgencyChange","listTotal","postNum","userDiaLog","userInfo","handleCloseDialog","$refs","UserFormRef","handleSureUser","ref","userForm","formRules","editRole","handleCloseEditRole","handleSureRoleChange","isIndeterminate","handleCheckAllChange","checkAll","_l","item","subsystem_id","subsystem_name","groupObj","item2","role_id","role_name","chooseAgency","handleCloseChooseAgency","handleSureAgencyChange","agencyId","agency_name","agTotal","agencyInfo","getAgList","staticRenderFns","created","userBtnList","powerList","path","mounted","computed","data","pageParam","page","pageSize","password","user_type","mobile_phone","email","sex","login_account","check_code","userId","allRoleObj","roleList","agency_code","agency_level","agList","watch","handler","newObj","length","allZero","len","groupLen","tempCheck","deep","methods","some","$confirm","type","Object","assign","$options","resetFields","validate","res","handleSureAddUser","console","log","checked","$message","error","components","Breadcrumb","Pagination","component"],"mappings":"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","file":"js/chunk-29459e7f.638f1c73.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user\"},[_c('breadcrumb',{attrs:{\"routeMeta\":_vm.$route.meta}}),_c('el-card',[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{attrs:{\"placeholder\":\"请输入需要查找的用户名\",\"clearable\":\"\"},on:{\"clear\":function($event){return _vm.getUserList()}},scopedSlots:_vm._u([{key:\"prepend\",fn:function(){return [_c('el-select',{staticStyle:{\"width\":\"100px\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.queryInfo.status),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"status\", $$v)},expression:\"queryInfo.status\"}},[_c('el-option',{attrs:{\"label\":\"全部\",\"value\":null}}),_c('el-option',{attrs:{\"label\":\"有效\",\"value\":1}}),_c('el-option',{attrs:{\"label\":\"无效\",\"value\":0}})],1)]},proxy:true},{key:\"append\",fn:function(){return [_c('el-button',{attrs:{\"icon\":\"el-icon-search\"},on:{\"click\":function($event){return _vm.getUserList()}}})]},proxy:true}]),model:{value:(_vm.queryInfo.name),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"name\", $$v)},expression:\"queryInfo.name\"}})],1),_c('el-col',{attrs:{\"span\":4}},[(_vm.$PowerKey(_vm.powerKey.UserPowerKey.UserAdd))?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleAddUserClick}},[_vm._v(\"添加用户\")]):_vm._e()],1)],1),_c('el-divider'),_c('el-table',{attrs:{\"data\":_vm.userList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"#\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"用户名\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\"}}),_c('el-table-column',{attrs:{\"prop\":\"mobile_phone\",\"label\":\"手机号\"}}),_c('el-table-column',{attrs:{\"label\":\"用户类型\",\"min-width\":\"100\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(val){return [_c('el-tooltip',{attrs:{\"disabled\":val.row.member!=1,\"effect\":\"dark\",\"content\":\"点击升级成代理\",\"placement\":\"left\",\"enterable\":false}},[_c('el-tag',{style:({'cursor':val.row.member==1?'pointer':'auto'}),attrs:{\"type\":_vm.commonFn.UserType(val.row.member).color},on:{\"click\":function($event){return _vm.handleUpAgency(val.row)}}},[_vm._v(_vm._s(_vm.commonFn.UserType(val.row.member).name))])],1)]}}])}),_c('el-table-column',{attrs:{\"prop\":\"login_account\",\"label\":\"登陆账号\"}}),_c('el-table-column',{attrs:{\"prop\":\"last_login_time\",\"label\":\"登陆时间\"}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"状态\",\"width\":\"100\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(val){return [_c('el-switch',{attrs:{\"disabled\":!_vm.$PowerKey(_vm.powerKey.UserPowerKey.UserUpdateStatus),\"value\":val.row.status == 1},on:{\"change\":function($event){return _vm.handleSwitchChange(val.row)}}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"400\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(val){return [(_vm.$PowerKey(_vm.powerKey.UserPowerKey.UserUpdate))?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.handleEditUserClick(val.row.id)}}},[_vm._v(\"编辑\")]):_vm._e(),(_vm.$PowerKey(_vm.powerKey.UserPowerKey.UserInfo))?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\",\"icon\":\"el-icon-refresh\"},on:{\"click\":function($event){return _vm.handleLoadUser(val.row)}}},[_vm._v(\"重载\")]):_vm._e(),(_vm.$PowerKey(_vm.powerKey.UserPowerKey.UserDeployRole))?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"warning\",\"icon\":\"el-icon-s-tools\"},on:{\"click\":function($event){return _vm.handleRoleChange(val.row)}}},[_vm._v(\"分配角色\")]):_vm._e(),(_vm.$PowerKey(_vm.powerKey.UserPowerKey.UserDeployRole))?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"success\",\"icon\":\"el-icon-s-tools\"},on:{\"click\":function($event){return _vm.handleAgencyChange(val.row)}}},[_vm._v(\"分配代理\")]):_vm._e()]}}])})],1),_c('pagination',{attrs:{\"total\":_vm.listTotal,\"pageSizes\":[5, 10, 20],\"queryInfo\":_vm.queryInfo,\"queryFunc\":_vm.getUserList}})],1),_c('el-dialog',{attrs:{\"title\":_vm.postNum==1?'添加用户':'修改用户',\"visible\":_vm.userDiaLog.userInfo,\"width\":\"40%\"},on:{\"update:visible\":function($event){return _vm.$set(_vm.userDiaLog, \"userInfo\", $event)},\"close\":function($event){return _vm.handleCloseDialog(_vm.$refs.UserFormRef)}},scopedSlots:_vm._u([{key:\"footer\",fn:function(){return [_c('span',{staticClass:\"dialog-footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.userDiaLog.userInfo = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleSureUser(_vm.postNum)}}},[_vm._v(\"确 定\")])],1)]},proxy:true}])},[_c('el-form',{ref:\"UserFormRef\",attrs:{\"model\":_vm.userForm,\"status-icon\":\"\",\"rules\":_vm.formRules,\"label-width\":\"80px\"}},[(_vm.postNum!=2)?_c('el-form-item',{attrs:{\"label\":\"账户名\",\"prop\":\"login_account\"}},[_c('el-input',{model:{value:(_vm.userForm.login_account),callback:function ($$v) {_vm.$set(_vm.userForm, \"login_account\", $$v)},expression:\"userForm.login_account\"}})],1):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"姓名\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.userForm.name),callback:function ($$v) {_vm.$set(_vm.userForm, \"name\", $$v)},expression:\"userForm.name\"}})],1),(_vm.postNum!=2)?_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.userForm.password),callback:function ($$v) {_vm.$set(_vm.userForm, \"password\", $$v)},expression:\"userForm.password\"}})],1):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"手机号\",\"prop\":\"mobile_phone\"}},[_c('el-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.userForm.mobile_phone),callback:function ($$v) {_vm.$set(_vm.userForm, \"mobile_phone\", $$v)},expression:\"userForm.mobile_phone\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.userForm.email),callback:function ($$v) {_vm.$set(_vm.userForm, \"email\", $$v)},expression:\"userForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"性别\"}},[_c('el-select',{model:{value:(_vm.userForm.sex),callback:function ($$v) {_vm.$set(_vm.userForm, \"sex\", $$v)},expression:\"userForm.sex\"}},[_c('el-option',{attrs:{\"label\":\"男\",\"value\":1}}),_c('el-option',{attrs:{\"label\":\"女\",\"value\":0}}),_c('el-option',{attrs:{\"label\":\"未知\",\"value\":2}})],1)],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配用户角色\",\"visible\":_vm.userDiaLog.editRole,\"width\":\"30%\"},on:{\"update:visible\":function($event){return _vm.$set(_vm.userDiaLog, \"editRole\", $event)},\"close\":_vm.handleCloseEditRole},scopedSlots:_vm._u([{key:\"footer\",fn:function(){return [_c('el-button',{on:{\"click\":function($event){_vm.userDiaLog.editRole = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSureRoleChange}},[_vm._v(\"确 定\")])]},proxy:true}])},[_c('div',{staticClass:\"dia_body\"},[_c('p',[_vm._v(\"当前用户：\"+_vm._s(_vm.userForm.name))]),_c('el-checkbox',{attrs:{\"indeterminate\":_vm.isIndeterminate},on:{\"change\":_vm.handleCheckAllChange},model:{value:(_vm.checkAll),callback:function ($$v) {_vm.checkAll=$$v},expression:\"checkAll\"}},[_vm._v(\"全选\")]),_c('div',{staticStyle:{\"margin\":\"15px 0\"}}),_vm._l((_vm.roleList),function(item){return _c('el-row',{key:item.subsystem_id},[_c('label',{staticStyle:{\"color\":\"#f55\"}},[_vm._v(_vm._s(item.subsystem_name))]),(_vm.groupObj[item.subsystem_id+''])?_c('el-checkbox-group',{model:{value:(_vm.groupObj[item.subsystem_id+'']),callback:function ($$v) {_vm.$set(_vm.groupObj, item.subsystem_id+'', $$v)},expression:\"groupObj[item.subsystem_id+'']\"}},_vm._l((item.roleList),function(item2){return _c('el-checkbox',{key:item2.role_id,attrs:{\"label\":item2.role_id}},[_vm._v(_vm._s(item2.role_name))])}),1):_vm._e()],1)})],2)]),_c('el-dialog',{staticClass:\"user_edit\",attrs:{\"title\":\"分配代理\",\"visible\":_vm.userDiaLog.chooseAgency,\"width\":\"50%\"},on:{\"update:visible\":function($event){return _vm.$set(_vm.userDiaLog, \"chooseAgency\", $event)},\"close\":_vm.handleCloseChooseAgency},scopedSlots:_vm._u([{key:\"footer\",fn:function(){return [_c('el-button',{on:{\"click\":function($event){_vm.userDiaLog.chooseAgency = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSureAgencyChange}},[_vm._v(\"确 定\")])]},proxy:true}])},[_c('div',{staticClass:\"dia_body\"},_vm._l((_vm.agList),function(item){return _c('el-radio',{key:item.id,attrs:{\"label\":item.id},model:{value:(_vm.agencyId),callback:function ($$v) {_vm.agencyId=$$v},expression:\"agencyId\"}},[_vm._v(_vm._s(item.agency_name))])}),1),_c('pagination',{staticClass:\"pagination\",attrs:{\"total\":_vm.agTotal,\"pageSizes\":[5, 10, 20],\"queryInfo\":_vm.agencyInfo,\"queryFunc\":_vm.getAgList}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"user\">\n    <!-- 面包屑 -->\n    <breadcrumb :routeMeta=\"$route.meta\"></breadcrumb>\n    <!-- 卡片 -->\n    <el-card>\n      <el-row :gutter=\"20\">\n        <!-- 搜索框 -->\n        <el-col :span=\"8\">\n          <el-input\n            @clear=\"getUserList()\"\n            v-model=\"queryInfo.name\"\n            placeholder=\"请输入需要查找的用户名\"\n            clearable\n          >\n            <template #prepend>\n              <el-select v-model=\"queryInfo.status\" placeholder=\"请选择\" style=\"width:100px\">\n                <el-option label=\"全部\" :value=\"null\"></el-option>\n                <el-option label=\"有效\" :value=\"1\"></el-option>\n                <el-option label=\"无效\" :value=\"0\"></el-option>\n              </el-select>\n            </template>\n            <template #append>\n              <el-button icon=\"el-icon-search\" @click=\"getUserList()\"></el-button>\n            </template>\n          </el-input>\n        </el-col>\n        <!-- 添加用户框  -->\n        <el-col :span=\"4\">\n          <el-button\n            v-if=\"$PowerKey(powerKey.UserPowerKey.UserAdd)\"\n            type=\"primary\"\n            @click=\"handleAddUserClick\"\n          >添加用户</el-button>\n        </el-col>\n      </el-row>\n      <el-divider></el-divider>\n\n      <!-- 用户数据展示的表格 -->\n      <el-table :data=\"userList\" border stripe>\n        <el-table-column type=\"index\" label=\"#\"></el-table-column>\n        <el-table-column prop=\"name\" label=\"用户名\"></el-table-column>\n        <el-table-column prop=\"email\" label=\"邮箱\"></el-table-column>\n        <el-table-column prop=\"mobile_phone\" label=\"手机号\"></el-table-column>\n        <el-table-column label=\"用户类型\" min-width=\"100\" align=\"center\">\n          <template #default=\"val\">\n            <el-tooltip\n              :disabled=\"val.row.member!=1\"\n              effect=\"dark\"\n              content=\"点击升级成代理\"\n              placement=\"left\"\n              :enterable=\"false\"\n            >\n              <el-tag\n                :type=\"commonFn.UserType(val.row.member).color\"\n                @click=\"handleUpAgency(val.row)\"\n                :style=\"{'cursor':val.row.member==1?'pointer':'auto'}\"\n              >{{commonFn.UserType(val.row.member).name}}</el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"login_account\" label=\"登陆账号\"></el-table-column>\n        <el-table-column prop=\"last_login_time\" label=\"登陆时间\"></el-table-column>\n        <el-table-column prop=\"status\" label=\"状态\" width=\"100\" align=\"center\">\n          <!-- 这里用了作用域插槽，该插槽可以获取子组件的数据 -->\n          <template #default=\"val\">\n            <el-switch\n              :disabled=\"!$PowerKey(powerKey.UserPowerKey.UserUpdateStatus)\"\n              :value=\"val.row.status == 1\"\n              @change=\"handleSwitchChange(val.row)\"\n            ></el-switch>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"400\" align=\"center\">\n          <template #default=\"val\">\n            <!-- 修改 -->\n            <el-button\n              size=\"mini\"\n              type=\"primary\"\n              icon=\"el-icon-edit\"\n              @click=\"handleEditUserClick(val.row.id)\"\n              v-if=\"$PowerKey(powerKey.UserPowerKey.UserUpdate)\"\n            >编辑</el-button>\n            <!-- 重载 -->\n            <el-button\n              size=\"mini\"\n              type=\"danger\"\n              icon=\"el-icon-refresh\"\n              @click=\"handleLoadUser(val.row)\"\n              v-if=\"$PowerKey(powerKey.UserPowerKey.UserInfo)\"\n            >重载</el-button>\n            <!-- 分配 -->\n            <el-button\n              @click=\"handleRoleChange(val.row)\"\n              size=\"mini\"\n              type=\"warning\"\n              icon=\"el-icon-s-tools\"\n              v-if=\"$PowerKey(powerKey.UserPowerKey.UserDeployRole)\"\n            >分配角色</el-button>\n            <!-- 分配代理 -->\n            <el-button\n              @click=\"handleAgencyChange(val.row)\"\n              size=\"mini\"\n              type=\"success\"\n              icon=\"el-icon-s-tools\"\n              v-if=\"$PowerKey(powerKey.UserPowerKey.UserDeployRole)\"\n            >分配代理</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <!-- 分页 -->\n      <pagination\n        :total=\"listTotal\"\n        :pageSizes=\"[5, 10, 20]\"\n        :queryInfo=\"queryInfo\"\n        :queryFunc=\"getUserList\"\n      ></pagination>\n    </el-card>\n    <!-- 主体页面 结束 -->\n\n    <!-- 功能弹窗 开始 -->\n    <!-- 添加用户的弹窗 开始-->\n    <el-dialog\n      :title=\"postNum==1?'添加用户':'修改用户'\"\n      :visible.sync=\"userDiaLog.userInfo\"\n      width=\"40%\"\n      @close=\"handleCloseDialog($refs.UserFormRef)\"\n    >\n      <el-form\n        ref=\"UserFormRef\"\n        :model=\"userForm\"\n        status-icon\n        :rules=\"formRules\"\n        label-width=\"80px\"\n      >\n        <el-form-item v-if=\"postNum!=2\" label=\"账户名\" prop=\"login_account\">\n          <el-input v-model=\"userForm.login_account\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"姓名\" prop=\"name\">\n          <el-input v-model=\"userForm.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\" v-if=\"postNum!=2\">\n          <el-input type=\"password\" v-model=\"userForm.password\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"手机号\" prop=\"mobile_phone\">\n          <el-input type=\"text\" v-model=\"userForm.mobile_phone\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"邮箱\" prop=\"email\">\n          <el-input type=\"text\" v-model=\"userForm.email\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\">\n          <el-select v-model=\"userForm.sex\">\n            <el-option label=\"男\" :value=\"1\"></el-option>\n            <el-option label=\"女\" :value=\"0\"></el-option>\n            <el-option label=\"未知\" :value=\"2\"></el-option>\n          </el-select>\n        </el-form-item>\n        <!-- <el-form-item label=\"验证码\" prop=\"check_code\" v-if=\"postNum!=2\">\n          <el-input type=\"text\" v-model=\"userForm.check_code\"></el-input>\n        </el-form-item>-->\n      </el-form>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"userDiaLog.userInfo = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"handleSureUser(postNum)\">确 定</el-button>\n        </span>\n      </template>\n    </el-dialog>\n    <!-- 添加用户的弹窗 结束 -->\n\n    <!-- 分配角色对话框 开始 -->\n    <el-dialog\n      title=\"分配用户角色\"\n      :visible.sync=\"userDiaLog.editRole\"\n      width=\"30%\"\n      @close=\"handleCloseEditRole\"\n    >\n      <div class=\"dia_body\">\n        <p>当前用户：{{ userForm.name }}</p>\n        <el-checkbox\n          :indeterminate=\"isIndeterminate\"\n          v-model=\"checkAll\"\n          @change=\"handleCheckAllChange\"\n        >全选</el-checkbox>\n        <div style=\"margin: 15px 0;\"></div>\n        <el-row v-for=\"item in roleList\" :key=\"item.subsystem_id\">\n          <label style=\"color:#f55\">{{ item.subsystem_name }}</label>\n          <el-checkbox-group\n            v-if=\"groupObj[item.subsystem_id+'']\"\n            v-model=\"groupObj[item.subsystem_id+'']\"\n          >\n            <el-checkbox\n              v-for=\"item2 in item.roleList\"\n              :label=\"item2.role_id\"\n              :key=\"item2.role_id\"\n            >{{ item2.role_name }}</el-checkbox>\n          </el-checkbox-group>\n        </el-row>\n      </div>\n      <template #footer class=\"dialog-footer\">\n        <el-button @click=\"userDiaLog.editRole = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"handleSureRoleChange\">确 定</el-button>\n      </template>\n    </el-dialog>\n    <!-- 分配角色对话框 结束 -->\n\n    <!-- 分配代理人 开始 -->\n    <el-dialog\n      class=\"user_edit\"\n      title=\"分配代理\"\n      :visible.sync=\"userDiaLog.chooseAgency\"\n      width=\"50%\"\n      @close=\"handleCloseChooseAgency\"\n    >\n      <div class=\"dia_body\">\n        <el-radio\n          v-model=\"agencyId\"\n          :label=\"item.id\"\n          v-for=\"item in agList\"\n          :key=\"item.id\"\n        >{{item.agency_name}}</el-radio>\n      </div>\n\n      <pagination\n        class=\"pagination\"\n        :total=\"agTotal\"\n        :pageSizes=\"[5, 10, 20]\"\n        :queryInfo=\"agencyInfo\"\n        :queryFunc=\"getAgList\"\n      ></pagination>\n      <template #footer class=\"dialog-footer\">\n        <el-button @click=\"userDiaLog.chooseAgency = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"handleSureAgencyChange\">确 定</el-button>\n      </template>\n    </el-dialog>\n    <!-- 分配代理人 结束 -->\n  </div>\n</template>\n\n<script>\nimport {\n  getUserListApi,\n  getDeployRole,\n  getDeployRoleSaveApi,\n  getSysUserAddApi,\n  getSysUserInfoApi,\n  changeUserStatusApi,\n  getSysUserUpdateApi,\n  getAgencyAddApi,\n  getAgencyListApi,\n  giveAgencyUserApi\n} from \"@/api/api\";\n\nimport Breadcrumb from \"@/components/Breadcrumb.vue\";\nimport Pagination from \"@/components/Pagination.vue\";\n\nimport { mapState } from \"vuex\";\n\nimport { ruleEmail, ruleMobile, ruleAccount } from \"@/rules/index.js\";\n\nexport default {\n  name: \"users\",\n  created() {\n    // 按钮权限\n    this.userBtnList = this.powerList[this.$route.path];\n  },\n  mounted() {\n    this.getUserList();\n  },\n  computed: {\n    ...mapState(\"menu\", [\"powerList\"])\n  },\n  data() {\n    // /\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/\n    return {\n      userBtnList: [],\n      listTotal: null,\n      // 查询信息\n      queryInfo: {\n        name: \"\",\n        status: null,\n        pageParam: {\n          page: 1,\n          pageSize: 5\n        }\n      },\n      // 弹窗的打开判断\n      userDiaLog: {\n        userInfo: false,\n        editRole: false,\n        chooseAgency: false\n      },\n      // 用户表单\n      userForm: {\n        name: \"\",\n        password: \"\",\n        user_type: null,\n        mobile_phone: \"\",\n        email: \"\",\n        sex: null,\n        login_account: \"\",\n        check_code: \"\"\n      },\n      //\n      // 验证表单，该对象里的 属性要和 用户表单里的属性 名字一致\n      formRules: {\n        name: [\n          { required: true, message: \"请输入姓名\", trigger: \"blur\" },\n          { min: 3, max: 9, message: \"长度在 3 到 9 个字符\", trigger: \"blur\" }\n        ],\n        login_account: [\n          { required: true, validator: ruleAccount, trigger: \"blur\" },\n          { min: 3, max: 9, message: \"长度在 3 到 9 个字符\", trigger: \"blur\" }\n        ],\n        password: [\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\n          { min: 6, max: 18, message: \"长度在 6 到 18 个字符\", trigger: \"blur\" }\n        ],\n        email: [{ required: true, validator: ruleEmail, trigger: \"blur\" }],\n        mobile_phone: [\n          { required: true, validator: ruleMobile, trigger: \"blur\" }\n        ],\n        check_code: [\n          { required: false, message: \"请输入校验码\", trigger: \"blur\" }\n        ]\n      },\n      // 具体数据\n      userList: [],\n      //重新搞选项框\n      userId: null,\n      groupObj: {}, // 记录有效的 id\n      allRoleObj: {}, // 记录全部的 id\n      roleList: [],\n      checkAll: false,\n      isIndeterminate: false,\n      // 传输的标识\n      postNum: null,\n\n      /**\n       *\n       * 查询代理人\n       */\n      agencyInfo: {\n        agency_code: null,\n        agency_level: null,\n        pageParam: {\n          page: 1,\n          pageSize: 10\n        }\n      },\n      // 选中的代理id\n      agencyId: null,\n      // 代理id组\n      agList: [],\n      agTotal: null\n    };\n  },\n  watch: {\n    // groupObj 判定\n    groupObj: {\n      handler(newObj) {\n        let allZero = true;\n        for (const key in newObj) {\n          if (newObj[key].length != 0) {\n            allZero = false;\n          }\n        }\n        // 全0为true，退出\n        if (allZero == true) {\n          this.isIndeterminate = false;\n          this.checkAll = false;\n          return;\n        }\n\n        let tempCheck = true; // 全选\n        for (const key in this.allRoleObj) {\n          let len = this.allRoleObj[key].length;\n          let groupLen = newObj[key].length;\n          if (len != 0 && len != groupLen) {\n            tempCheck = false;\n          }\n        }\n\n        if (tempCheck == true) {\n          this.isIndeterminate = false;\n          this.checkAll = true;\n        } else {\n          this.isIndeterminate = true;\n          this.checkAll = false;\n        }\n      },\n      deep: true\n    }\n  },\n  methods: {\n    $PowerKey(str) {\n      return this.userBtnList && this.userBtnList.some(v => v.name_en == str);\n    },\n    async getUserList() {\n      let res = await getUserListApi(this.queryInfo);\n\n      if (res.code != 10000) {\n        this.$message.error(res.message);\n      }\n\n      this.userList = res.value;\n\n      (!this.listTotal || this.listTotal != res.num) &&\n        (this.listTotal = res.num);\n    },\n    // 切换 状态\n    handleSwitchChange(row) {\n      this.$confirm(\"确定要修改该用户的状态?\", \"提示\", {\n        type: \"warning\"\n      }).then(\n        async () => {\n          // 调用 修改状态的接口 row.id\n          let res = await changeUserStatusApi({\n            id: row.id,\n            status: row.status == true ? 0 : 1\n          });\n\n          if (res.code !== 10000) {\n            return his.$message.error(res.message);\n          }\n\n          // 弹窗提示\n          this.$message.success(res.message);\n\n          this.getUserList();\n        },\n        () => {\n          console.log(\"点击了取消\");\n        }\n      );\n    },\n    // 关闭 dialog 弹窗\n    handleCloseDialog(ref) {\n      // 1. 清空表单信息\n      Object.assign(this.userForm, this.$options.data().userForm);\n\n      // 2. 重置字段\n      ref && ref.resetFields();\n    },\n    // 点击添加用户\n    handleAddUserClick() {\n      this.userDiaLog.userInfo = true;\n      this.postNum = 1;\n      this.userForm.sex = 2;\n      this.userForm.user_type = 2;\n    },\n    // 点击修改用户\n    async handleEditUserClick(id) {\n      this.userInfoId = id;\n      this.postNum = 2;\n      this.userDiaLog.userInfo = true;\n      let res = await getSysUserInfoApi({\n        id: id\n      });\n      if (res.code == 10000) {\n        this.userForm = { ...res.value };\n      }\n    },\n    // 确定用户\n    handleSureUser(postNum) {\n      // console.log(this.userForm);\n      this.$refs.UserFormRef.validate(res => {\n        // 表单验证不合格，就返回\n        if (!res) {\n          return;\n        }\n        // 1 表示新增\n        if (postNum == 1) {\n          this.handleSureAddUser();\n        } else if (postNum == 2) {\n          this.handleSureEditUser();\n        }\n      });\n    },\n    // 确定增加用户\n    handleSureAddUser() {\n      this.$confirm(\"确定要添加该用户?\", \"提示\", {\n        type: \"warning\"\n      }).then(\n        async () => {\n          // 调用 添加用户的接口\n\n          let res = await getSysUserAddApi(this.userForm);\n          if (res.code == 10000) {\n            this.$message.success(res.message);\n            // 关闭dialog\n            this.userDiaLog.userInfo = false;\n            this.getUserList();\n          }\n        },\n        () => {\n          console.log(\"点击了取消\");\n        }\n      );\n    },\n    // 确定修改用户信息\n    async handleSureEditUser() {\n      console.log(this.userInfoId);\n      let params = {\n        id: this.userInfoId,\n        ...this.userForm\n      };\n      let res = await getSysUserUpdateApi(params);\n      if (res.code == 10000) {\n        this.$message.success(res.message);\n      }\n\n      // 关闭dialog\n      this.userDiaLog.userInfo = false;\n      this.getUserList();\n    },\n    handleLoadUser(row) {\n      // 通过发送给后台的 API，去修改该行的数据\n      (async () => {\n        this.queryInfo.name = row.name;\n        let res = await getUserListApi(this.queryInfo);\n        this.queryInfo.name = \"\";\n\n        if (res.code != 10000) {\n          this.$message.error(res.message);\n        } else {\n          this.$message.success(res.message);\n        }\n\n        row = {\n          ...res.value\n        };\n      })();\n    },\n    // 弹出角色修改窗口\n    async handleRoleChange(row) {\n      this.userId = row.id;\n      this.userForm.username = row.name;\n      this.userDiaLog.editRole = true;\n\n      // 1. 发送请求，获取全部角色 and 用户拥有的角色\n      let params = {\n        user_id: row.id\n      };\n      let res = await getDeployRole(params);\n      if (res.code != 10000) {\n        return this.$message.error(res.message);\n      }\n\n      this.roleList = res.value;\n      console.log(this.roleList);\n      // 如果 choose都为true，那么则表示 全选状态\n      let tempCheck = true;\n      this.roleList.forEach(v => {\n        // this.groupObj[v.subsystem_id] = [];\n        // 要记住： vue 没有重写array的直接赋值，所以要响应式，需要 $set\n        this.$set(this.groupObj, v.subsystem_id, []);\n        this.$set(this.allRoleObj, v.subsystem_id, []);\n\n        // 根据系统数量，创建 group 数量，该group里存放 role_id\n        v.roleList.forEach((v2, i2) => {\n          this.allRoleObj[v.subsystem_id].push(v2.role_id);\n          if (v2.choose) {\n            this.groupObj[v.subsystem_id].push(v2.role_id);\n            this.isIndeterminate != true && (this.isIndeterminate = true);\n          } else {\n            // 用来判断全选的，如果都没进入该 判断 ，则表示为全选状态\n            tempCheck = false;\n          }\n        });\n      });\n\n      if (tempCheck == true) {\n        this.isIndeterminate = false;\n        this.checkAll = tempCheck;\n      }\n    },\n\n    // 确定修改角色\n    async handleSureRoleChange() {\n      let deployRoleSubSystemList = [];\n\n      for (const key in this.groupObj) {\n        console.log(key);\n        if (this.groupObj[key].length != 0) {\n          deployRoleSubSystemList.push({\n            subsystem_id: key,\n            role_id: this.groupObj[key]\n          });\n        }\n      }\n\n      let params = {\n        user_id: this.userId,\n        deployRoleSubSystemList\n      };\n\n      let res = await getDeployRoleSaveApi(params);\n\n      console.log(res);\n      if (res.code != 10000) {\n        return this.$message.error(res.message);\n      }\n\n      this.$message.success(res.message);\n\n      this.userDiaLog.editRole = false;\n    },\n\n    // 点击全选\n    handleCheckAllChange(checked) {\n      console.log(this.allRoleObj);\n\n      if (checked) {\n        // this.groupObj = this.allRoleObj;\n        for (const key in this.allRoleObj) {\n          this.groupObj[key] = this.allRoleObj[key];\n        }\n      } else {\n        for (const key in this.groupObj) {\n          this.$set(this.groupObj, key, []);\n        }\n      }\n    },\n    // 关闭分配用户对话框\n    handleCloseEditRole() {\n      // this.groupObj = [];\n      console.log(this.groupObj);\n      this.userId = null;\n      this.checkAll = false;\n      this.roleList = [];\n      this.groupObj = {};\n      this.isIndeterminate = false;\n    },\n\n    /**\n     * 代理人\n     */\n    async getAgList() {\n      let res = await getAgencyListApi(this.agencyInfo);\n\n      if (res.code != 10000) {\n        return this.$message.error(res.message);\n      }\n\n      this.agList = res.value;\n\n      (!this.agTotal || this.agTotal != res.num) && (this.agTotal = res.num);\n    },\n\n    // 会员升级成代理人\n    handleUpAgency(row) {\n      console.log(row);\n      if (row.member != 1) {\n        return this.$message.error(\"该用户无法升级为代理，只有会员才可以\");\n      }\n\n      this.$confirm(\"确定要升级该会员?\", \"提示\", {\n        type: \"warning\"\n      }).then(\n        async () => {\n          // 调用 添加用户的接口\n          let params = {\n            user_id: row.id\n          };\n\n          let res = await getAgencyAddApi(params);\n\n          if (res.code != 10000) {\n            return this.$message.error(res.message);\n          }\n\n          // 代理人角色的id为 40\n          // subsystem_id: 23   \"泉圣内部系统\"\n          let params2 = {\n            user_id: row.id,\n            deployRoleSubSystemList: [\n              {\n                subsystem_id: 23,\n                role_id: [40]\n              }\n            ]\n          };\n          let res2 = await getDeployRoleSaveApi(params2);\n\n          if (res2.code != 10000) {\n            return this.$message.error(res.message);\n          }\n\n          this.$message.success(res.message);\n\n          this.getUserList();\n        },\n        () => {\n          console.log(\"点击了取消\");\n        }\n      );\n    },\n\n    // 分配代理弹窗\n    async handleAgencyChange(row) {\n      // 获取代理人列表\n      this.getAgList();\n      this.userId = row.id;\n      this.userDiaLog.chooseAgency = true;\n    },\n    // 确定分配\n    async handleSureAgencyChange() {\n      console.log(this.agencyId);\n      if (!this.userId || !this.agencyId) {\n        return this.$message.error(\"请选择~\");\n      }\n      let p = {\n        agency_id: this.agencyId,\n        user_id: this.userId\n      };\n      let res = await giveAgencyUserApi(p);\n\n      if (res.code != 10000) {\n        return this.$message.error(res.message);\n      }\n\n      this.$message.success(res.message);\n      this.userDiaLog.chooseAgency = false;\n\n      this.getUserList();\n    },\n    handleCloseChooseAgency() {\n      this.agencyId = null;\n      this.userId = null;\n    }\n  },\n\n  components: {\n    Breadcrumb,\n    Pagination\n  }\n};\n</script>\n\n<style lang=\"scss\" >\n.default_list {\n  color: #f55;\n}\n.all_list {\n  cursor: pointer;\n  user-select: none;\n\n  &:hover {\n    color: #444;\n  }\n  &:active {\n    text-shadow: 0 0 1px #aaa;\n  }\n}\n\n.user_edit {\n  .el-dialog {\n    min-width: 600px;\n  }\n  .dia_body {\n    height: 350px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=275af66c&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\nimport style0 from \"./User.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}