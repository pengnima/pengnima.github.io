(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ced7bdf"],{6481:function(e,n,t){"use strict";var r=t("705c"),a=t.n(r);a.a},"705c":function(e,n,t){},c2f1:function(e,n,t){"use strict";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"subsystem"},[t("breadcrumb",{attrs:{routeMeta:e.$route.meta}}),t("el-row",[e._v(" [ "),t("span",{staticClass:"sys_name"},[e._v(e._s(e.info.name))]),e._v(" ] ")]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:10}},[t("el-tree",{ref:"tree",staticClass:"tree",attrs:{"node-key":"id","highlight-current":"",props:e.props,load:e.loadNode,indent:0,lazy:"","show-checkbox":"","expand-on-click-node":!1,"icon-class":"el-icon-circle-plus-outline"},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(n){var r=n.node,a=n.data;return t("span",{staticClass:"custom-tree-node"},[t("span",{staticStyle:{"margin-right":"15px"}},[e._v(e._s(r.label))]),t("span",[1==r.level||2==r.level?t("el-button",{staticClass:"el-icon-circle-plus",attrs:{type:"text"},on:{click:function(n){return e.handleMenuAdd(r,a)}}}):e._e(),1==r.level||2==r.level?t("el-button",{staticClass:"el-icon-s-tools",attrs:{type:"text"},on:{click:function(n){return e.handleMenuEdit(r,a)}}}):e._e(),1==r.level||2==r.level?t("el-button",{staticClass:"el-icon-remove",attrs:{type:"text"},on:{click:function(n){return e.handleMenuRemove(r,a)}}}):e._e()],1)])}}])})],1),t("el-col",{attrs:{span:14}},[t("el-form",{ref:"formRef",class:["right_form",{form_active:e.isshow}],attrs:{model:e.menuForm,rules:e.formRules}},[t("el-form-item",{attrs:{prop:"name"}},[t("label",[e._v("菜单名称(中文)")]),t("el-input",{model:{value:e.menuForm.name,callback:function(n){e.$set(e.menuForm,"name",n)},expression:"menuForm.name"}})],1),t("el-form-item",{attrs:{prop:"name_en"}},[t("label",[e._v("菜单名称(英文)")]),t("el-input",{model:{value:e.menuForm.name_en,callback:function(n){e.$set(e.menuForm,"name_en",n)},expression:"menuForm.name_en"}})],1),t("el-form-item",{attrs:{prop:"addr"}},[t("label",[e._v("路径地址")]),t("el-input",{model:{value:e.menuForm.addr,callback:function(n){e.$set(e.menuForm,"addr",n)},expression:"menuForm.addr"}})],1),t("el-form-item",[t("label",[e._v("上级菜单")]),t("el-input",{attrs:{disabled:""},model:{value:e.menuForm.parent_name,callback:function(n){e.$set(e.menuForm,"parent_name",n)},expression:"menuForm.parent_name"}})],1),t("el-form-item",[t("label",[e._v("菜单类型")]),t("el-select",{staticStyle:{display:"block"},attrs:{placeholder:"请选择",disabled:""},model:{value:e.menuForm.type,callback:function(n){e.$set(e.menuForm,"type",n)},expression:"menuForm.type"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{prop:"memo"}},[t("label",[e._v("备注")]),t("el-input",{model:{value:e.menuForm.memo,callback:function(n){e.$set(e.menuForm,"memo",n)},expression:"menuForm.memo"}})],1),t("el-button",{on:{click:function(n){return e.handleSureMenu(this.postNum)}}},[e._v("提交")]),t("el-button",{on:{click:e.handleCancleForm}},[e._v("取消")])],1)],1)],1)],1)},a=[],o=(t("4160"),t("b0c0"),t("159b"),t("96cf"),t("1da1")),s=t("5530"),l=t("4ec3"),u=t("2fbc"),i=t("2f62"),m=t("6bfe"),c={name:"subSystemOperate",created:function(){this.info={name:"彭尼玛_子系统",id:1}},mounted:function(){},data:function(){return{postNum:null,info:{},props:{label:"name",isLeaf:"leaf"},isshow:!1,value:"",options:[{value:1,label:"一级菜单"},{value:2,label:"二级菜菜单"},{value:3,label:"按钮"}],menuForm:{subsystem_id:null,name:"",name_en:"",parent_id:null,parent_name:"",order_id:1,type:null,addr:"",memo:""},formRules:{name:[{required:!0,message:"请输入菜单名",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 9 个字符",trigger:"blur"}],name_en:[{required:!0,validator:m["e"],trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],addr:[{required:!0,validator:m["b"],trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],memo:[{required:!0,message:"请输入备注",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}]}}},computed:Object(s["a"])({},Object(i["c"])("tabs",["pageTabs"])),methods:{handleNodeClick:function(e,n){},loadNode:function(e,n){0===e.level&&this.requestTree(n),1===e.level&&this.getChildrenNode(e,n),2===e.level&&this.getButtinrenNode(e,n)},requestTree:function(e){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={id:n.info.id,name:n.info.name},t.next=3,Object(l["q"])(r);case 3:a=t.sent,1e4==a.code&&(console.log(a.value),e(a.value.subSystemMenuList));case 5:case"end":return t.stop()}}),t)})))()},getChildrenNode:function(e,n){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={id:t.info.id,one_menu_id:e.data.id},r.next=3,Object(l["r"])(a,{emulateJSON:!0,emulateHTTP:!0});case 3:o=r.sent,1e4==o.code&&(console.log(o.value),n(o.value));case 5:case"end":return r.stop()}}),r)})))()},getButtinrenNode:function(e,n){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={id:t.info.id,one_menu_id:e.data.id},r.next=3,Object(l["m"])(a,{emulateJSON:!0,emulateHTTP:!0});case 3:o=r.sent,1e4==o.code&&(console.log(o.value),o.value.forEach((function(e){e["leaf"]=!0})),n(o.value));case 5:case"end":return r.stop()}}),r)})))()},handleMenuAdd:function(e,n){console.log(n),console.log(e),this.isshow=!0,this.menuForm.subsystem_id=this.info.id,this.menuForm.parent_id=n.id,this.menuForm.parent_name=n.name,this.menuForm.type=e.level+1},handleSureMenu:function(e){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=e){t.next=2;break}return t.abrupt("return");case 2:n.$refs.formRef.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1==r){t.next=2;break}return t.abrupt("return",n.$message.error("请按正确格式输入"));case 2:if(a=null,0!=e){t.next=7;break}console.log("发送删除菜单的请求"),t.next=19;break;case 7:if(1!=e){t.next=14;break}return console.log("发送新增菜单的请求"),t.next=11,Object(l["o"])(n.menuForm);case 11:a=t.sent,t.next=19;break;case 14:if(2!=e){t.next=19;break}return console.log("发送修改菜单的请求"),t.next=18,Object(l["p"])(n.menuForm);case 18:a=t.sent;case 19:if(!a||1e4==a.code){t.next=21;break}return t.abrupt("return",n.$message.error(a.message));case 21:n.$message.success(a.message),n.handleCancleForm();case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})))()},handleCancleForm:function(){this.isshow=!1,this.postNum=null,this.menuForm={subsystem_id:null,name:"",name_en:"",parent_id:null,parent_name:"",order_id:1,type:null,addr:"",memo:""},this.$refs.formRef.resetFields()},handleMenuEdit:function(e,n){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(n),t.postNum=2,t.isshow=!0,e.next=5,Object(l["n"])({id:n.id});case 5:if(r=e.sent,1e4==r.code){e.next=8;break}return e.abrupt("return",t.$message.error(r.message));case 8:r=r.value,t.menuForm={subsystem_id:t.info.id,name:r.name,name_en:r.name_en,parent_id:r.parent_id,parent_name:r.parent_name,order_id:1,type:r.type,addr:r.addr,memo:r.memo};case 10:case"end":return e.stop()}}),e)})))()},handleMenuRemove:function(e,n){console.log(e,n)}},components:{Breadcrumb:u["a"]}},d=c,p=(t("6481"),t("2877")),f=Object(p["a"])(d,r,a,!1,null,"247477c5",null);n["default"]=f.exports}}]);
//# sourceMappingURL=chunk-3ced7bdf.19ab796f.js.map