(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["goods_add"],{1276:function(e,t,a){"use strict";var r=a("d784"),o=a("44e7"),n=a("825a"),s=a("1d80"),i=a("4840"),l=a("8aa5"),c=a("50c4"),u=a("14c3"),d=a("9263"),g=a("d039"),p=[].push,m=Math.min,f=4294967295,b=!g((function(){return!RegExp(f,"y")}));r("split",2,(function(e,t,a){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var r=String(s(this)),n=void 0===a?f:a>>>0;if(0===n)return[];if(void 0===e)return[r];if(!o(e))return t.call(r,e,n);var i,l,c,u=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,b=new RegExp(e.source,g+"g");while(i=d.call(b,r)){if(l=b.lastIndex,l>m&&(u.push(r.slice(m,i.index)),i.length>1&&i.index<r.length&&p.apply(u,i.slice(1)),c=i[0].length,m=l,u.length>=n))break;b.lastIndex===i.index&&b.lastIndex++}return m===r.length?!c&&b.test("")||u.push(""):u.push(r.slice(m)),u.length>n?u.slice(0,n):u}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var o=s(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,o,a):r.call(String(o),t,a)},function(e,o){var s=a(r,e,this,o,r!==t);if(s.done)return s.value;var d=n(e),g=String(this),p=i(d,RegExp),h=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(b?"y":"g"),_=new p(b?d:"^(?:"+d.source+")",v),x=void 0===o?f:o>>>0;if(0===x)return[];if(0===g.length)return null===u(_,g)?[g]:[];var y=0,L=0,w=[];while(L<g.length){_.lastIndex=b?L:0;var k,S=u(_,b?g:g.slice(L));if(null===S||(k=m(c(_.lastIndex+(b?0:L)),g.length))===y)L=l(g,L,h);else{if(w.push(g.slice(y,L)),w.length===x)return w;for(var I=1;I<=S.length-1;I++)if(w.push(S[I]),w.length===x)return w;L=y=k}}return w.push(g.slice(y)),w}]}),!b)},"159b":function(e,t,a){var r=a("da84"),o=a("fdbc"),n=a("17c2"),s=a("9112");for(var i in o){var l=r[i],c=l&&l.prototype;if(c&&c.forEach!==n)try{s(c,"forEach",n)}catch(u){c.forEach=n}}},"17c2":function(e,t,a){"use strict";var r=a("b727").forEach,o=a("a640"),n=a("ae40"),s=o("forEach"),i=n("forEach");e.exports=s&&i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},2374:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goods"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v(e._s(e.$route.name))])],1),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:function(t){return e.getGoodsList()}},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.getGoodsList()}},slot:"append"})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/goods/add")}}},[e._v("添加商品")])],1)],1),a("el-table",{staticClass:"cat_omt",attrs:{data:e.goodsList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称",width:"900"}}),a("el-table-column",{attrs:{prop:"goods_price",label:"商品价格(元)",width:"120"}}),a("el-table-column",{attrs:{prop:"goods_weight",label:"商品重量"}}),a("el-table-column",{attrs:{prop:"upd_time",label:"创建时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.upd_time)))]}}])}),a("el-table-column",{attrs:{label:"操作",width:"150"}},[[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"}}),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"}})]],2)],1),a("el-pagination",{ref:"paginationRef",staticClass:"cat_omt",attrs:{background:"",layout:"total,sizes,prev, pager, next,jumper",total:e.total,"page-sizes":[10,20,30,50],"page-size":e.queryInfo.pagesize},on:{"update:pageSize":function(t){return e.$set(e.queryInfo,"pagesize",t)},"update:page-size":function(t){return e.$set(e.queryInfo,"pagesize",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},o=[],n=(a("96cf"),a("1da1")),s=a("8daa"),i={created:function(){this.getGoodsList()},data:function(){return{total:0,goodsList:[],queryInfo:{query:"",pagenum:1,pagesize:10}}},methods:{getGoodsList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["a"])({url:"goods",params:e.queryInfo});case 2:if(a=t.sent,r=a.data,200==r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取商品列表失败"));case 6:e.total=r.data.total,e.goodsList=r.data.goods;case 8:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getGoodsList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getGoodsList()}}},l=i,c=a("2877"),u=Object(c["a"])(l,r,o,!1,null,null,null);t["default"]=u.exports},4160:function(e,t,a){"use strict";var r=a("23e7"),o=a("17c2");r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},"44e7":function(e,t,a){var r=a("861d"),o=a("c6b6"),n=a("b622"),s=n("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==o(e))}},"49aa":function(e,t,a){"use strict";var r=a("ec90"),o=a.n(r);o.a},"4f9b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goods_add"},[a("el-card",[a("el-row",[a("el-alert",{attrs:{title:"添加商品信息",center:"",type:"info","show-icon":""}})],1),a("el-steps",{staticClass:"cat_omt",attrs:{active:e.activeIndex-0,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"商品参数"}}),a("el-step",{attrs:{title:"商品属性"}}),a("el-step",{attrs:{title:"商品图片"}}),a("el-step",{attrs:{title:"商品内容"}}),a("el-step",{attrs:{title:"完成"}})],1),a("el-form",{ref:"ruleForm",attrs:{model:e.goodsForm,"status-icon":"",rules:e.goodsRules,"label-position":"top"}},[a("el-tabs",{staticClass:"cat_omt",attrs:{"tab-position":"left","before-leave":e.handleBeforeLeave},on:{"tab-click":e.tabClick},model:{value:e.activeIndex,callback:function(t){e.activeIndex=t},expression:"activeIndex"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{model:{value:e.goodsForm.goods_name,callback:function(t){e.$set(e.goodsForm,"goods_name",t)},expression:"goodsForm.goods_name"}})],1),a("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[a("el-input",{attrs:{type:"number"},model:{value:e.goodsForm.goods_price,callback:function(t){e.$set(e.goodsForm,"goods_price",t)},expression:"goodsForm.goods_price"}})],1),a("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[a("el-input",{attrs:{type:"number"},model:{value:e.goodsForm.goods_weight,callback:function(t){e.$set(e.goodsForm,"goods_weight",t)},expression:"goodsForm.goods_weight"}})],1),a("el-form-item",{attrs:{label:"商品数量",prop:"goods_name"}},[a("el-input",{attrs:{type:"number"},model:{value:e.goodsForm.goods_number,callback:function(t){e.$set(e.goodsForm,"goods_number",t)},expression:"goodsForm.goods_number"}})],1),a("el-form-item",{attrs:{label:"商品分类",prop:"goods_cat"}},[a("el-cascader",{attrs:{options:e.cateList,props:{expandTrigger:"hover",value:"cat_id",label:"cat_name"}},model:{value:e.goodsForm.goods_cat,callback:function(t){e.$set(e.goodsForm,"goods_cat",t)},expression:"goodsForm.goods_cat"}})],1)],1),a("el-tab-pane",{attrs:{label:"商品参数",name:"1"}},e._l(e.manyTabDate,(function(t){return a("el-form-item",{key:t.attr_id,attrs:{label:t.attr_name}},[a("el-checkbox-group",{model:{value:t.attr_vals,callback:function(a){e.$set(t,"attr_vals",a)},expression:"item.attr_vals"}},e._l(t.attr_vals,(function(e){return a("el-checkbox",{key:e,attrs:{border:"",label:e}})})),1)],1)})),1),a("el-tab-pane",{attrs:{label:"商品属性",name:"2"}},e._l(e.onlyTabDate,(function(e){return a("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[a("el-input",{attrs:{value:e.attr_vals}})],1)})),1),a("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[a("el-upload",{attrs:{headers:e.headerObj,name:"upfile",action:e.upLoadURL,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"list-type":"picture","with-credentials":""},scopedSlots:e._u([{key:"tip",fn:function(){return[e._v("只能上传jpg/png文件，且不超过500kb")]},proxy:!0}])},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),a("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[a("quill-editor",{model:{value:e.goodsForm.goods_introduce,callback:function(t){e.$set(e.goodsForm,"goods_introduce",t)},expression:"goodsForm.goods_introduce"}})],1)],1)],1)],1)],1)},o=[],n=(a("4160"),a("ac1f"),a("1276"),a("159b"),a("96cf"),a("1da1")),s=a("8daa"),i={created:function(){this.getCateList()},data:function(){var e=this,t=function(t,a,r){if(3!=a.length)return e.goodsForm.goods_cat=[],r(new Error("请选择三级分类"));r()};return{activeIndex:"0",goodsForm:{goods_name:"",goods_number:null,goods_price:null,goods_weight:null,goods_cat:[],goods_introduce:"",pics:"",attrs:[]},goodsRules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],goods_cat:[{required:!0,validator:t,trigger:"change"}]},cateList:[],manyTabDate:[],onlyTabDate:[],upLoadURL:"/api/upload",headerObj:{Authorization:window.sessionStorage.getItem("token")}}},methods:{getCateList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["a"])({url:"categories"});case 2:if(a=t.sent,r=a.data,200==r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("请求数据失败~"));case 6:e.cateList=r.data;case 7:case"end":return t.stop()}}),t)})))()},handleBeforeLeave:function(e,t){if(0==t&&3!=this.goodsForm.goods_cat.length)return this.$message.error("至少请先输入商品分类"),!1},tabClick:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("1"!=e.activeIndex){t.next=11;break}return t.next=3,Object(s["a"])({url:"categories/".concat(e.catId,"/attributes"),params:{sel:"many"}});case 3:if(a=t.sent,r=a.data,200==r.meta.status){t.next=7;break}return t.abrupt("return",e.$message.error("请求数据失败~"));case 7:r.data.forEach((function(e){e.attr_vals=0!=e.attr_vals.length?e.attr_vals.split(" "):[]})),e.manyTabDate=r.data,t.next=19;break;case 11:if("2"!=e.activeIndex){t.next=19;break}return t.next=14,Object(s["a"])({url:"categories/".concat(e.catId,"/attributes"),params:{sel:"only"}});case 14:if(o=t.sent,n=o.data,200==n.meta.status){t.next=18;break}return t.abrupt("return",e.$message.error("请求数据失败~"));case 18:e.onlyTabDate=n.data;case 19:case"end":return t.stop()}}),t)})))()},handlePreview:function(){},handleRemove:function(){}},computed:{catId:function(){var e=this.goodsForm.goods_cat;return 3==e.length?e[2]:null}}},l=i,c=(a("49aa"),a("2877")),u=Object(c["a"])(l,r,o,!1,null,"6e8390f4",null);t["default"]=u.exports},a640:function(e,t,a){"use strict";var r=a("d039");e.exports=function(e,t){var a=[][e];return!!a&&r((function(){a.call(null,t||function(){throw 1},1)}))}},ec90:function(e,t,a){},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=goods_add.9d140fc3.js.map